{"version":3,"sources":["../src/index.js"],"names":["Scope","get","name","hasOwnProperty","e","console","log","message","set","value","exports","use","obj","Object","keys","forEach","key","wait","timeout","_this","waitTime","Promise","resolve","reject","pInterval","setInterval","every","clearInterval","setTimeout","JSON","stringify","$","plugins","pluginsPath","pluginsPathResolve","path","join","process","cwd","then","paths","pluginPath","env","DEBUG","pluginRequest","require","default","controllers","controllersPath","controllersPathResolve","controllerPath","controllerRequest","routes","routesPath","routesPathResolve","router","express","Router","routePath","routeRequest","map","mapPath","mapPathResolve","filePath","fileRequire"],"mappings":"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","file":"index.js","sourcesContent":["//Global scope driver\n\nimport path from \"path\";\nimport globby from \"globby\";\nimport express from \"express\";\n\nvar Scope = {};\n\nScope.get = function(name) {\n    try{\n        if(this.hasOwnProperty(name))\n            return this[name]\n        else\n            throw `${name} does not exist in scope`;\n    }\n    catch(e){\n        console.log(e.message);\n        return false;\n    }\n};\n\nScope.set = function(name, value) {\n    try{\n        if(this.hasOwnProperty(name))\n            console.log(`${name} was replaced by the value ${value}`);\n    } catch(e) { }\n\n    if(name !== \"get\" && name !== \"set\" && name !== \"use\"){\n        this[name] = value;\n        exports[name] = value;\n    }\n    else{\n        console.log(`Do not use the names \"get\", \"set\" or \"use\"`);\n    }\n};\n\nScope.use = function(obj) {\n    if(typeof obj == \"object\"){\n        Object.keys(obj).forEach((key) => {\n            this[key] = obj[key];\n        });\n    }\n};\n\nScope.wait = function(obj, timeout) {\n    var _this = this;\n    var waitTime = timeout || 3000;\n\n    return new Promise(async (resolve, reject) => {\n        try{\n            if(typeof obj == \"object\"){\n                var pInterval = setInterval(() => {\n                    if(obj.every((key) => { return _this.hasOwnProperty(key); })){\n                        clearInterval(pInterval);\n                        resolve();\n                    }\n                }, 100);\n            }\n            else if(typeof obj == \"string\"){\n                var pInterval = setInterval(() => {\n                    if(_this.hasOwnProperty(obj)){\n                        clearInterval(pInterval);\n                        resolve();\n                    }\n                }, 100);\n            }\n\n            setTimeout(() => {\n                reject(\"The wait timeout was reached without loading the dependencies\", JSON.stringify(obj))\n            }, waitTime);\n        } catch(e){\n            reject(e.message);\n        }\n    });\n};\n\nexport let $ = Scope;\nexport default Scope;\n\n//Plugins\nexport let plugins = async (pluginsPath) => {\n    try{\n        const pluginsPathResolve = path.join(process.cwd(), pluginsPath);\n\n        await globby([`${pluginsPathResolve}/index.js`, `${pluginsPathResolve}/build/index.js`, `${pluginsPathResolve}/*/build/index.js`]).then(async (paths) => {\n            await paths.forEach(async (pluginPath) => {\n                if(process.env.DEBUG == 'true')\n                    console.log(`[ Plugins ] - Load ${pluginPath}`);\n\n                var pluginRequest = require(path.resolve(pluginPath));\n\n                if(typeof pluginRequest == \"function\")\n                    await pluginRequest();\n                else if(typeof pluginRequest.default == \"function\")\n                    await pluginRequest.default();\n            });\n        });\n    } catch(e){\n        console.log(`[ Plugins ] - ${e.message}`);\n    }\n};\n\n//Controllers\nexport let controllers = async (controllersPath) => {\n    try{\n        const controllersPathResolve = path.join(process.cwd(), controllersPath);\n\n        await globby([`${controllersPathResolve}/*.js`, `${controllersPathResolve}/**/*.js`]).then(async (paths) => {\n            paths.forEach(async (controllerPath) => {\n                if(process.env.DEBUG == 'true')\n                    console.log(`[ Controllers ] - Load ${controllerPath}`);\n\n                var controllerRequest = require(path.resolve(controllerPath));\n\n                if(typeof controllerRequest == \"function\")\n                    await controllerRequest();\n                else if(typeof controllerRequest.default == \"function\")\n                    await controllerRequest.default();\n            });\n        });\n    }\n    catch(e){\n        console.log(`[ Controllers ] - ${e.message}`);\n    }\n}\n\n//Routes\nexport let routes = async (routesPath) => {\n    const routesPathResolve = path.join(process.cwd(), routesPath);\n    const router = express.Router();\n\n    await globby([`${routesPathResolve}/*.js`, `${routesPathResolve}/**/*.js`]).then((paths) => {\n        paths.forEach((routePath) => {\n            var routeRequest = require(path.resolve(routePath));\n\n            if(typeof routeRequest == \"function\")\n                routeRequest(router);\n            else if(typeof routeRequest.default == \"function\")\n                routeRequest.default(router);\n        });\n\n        return true;\n    });\n\n    return router;\n}\n\n//Maps\nexport let map = async (mapPath) => {\n    const mapPathResolve = path.join(process.cwd(), mapPath);\n\n    await globby([`${mapPathResolve}/*.js`, `${mapPathResolve}/**/*.js`]).then((paths) => {\n        paths.forEach((filePath) => {\n            let fileRequire = require(path.resolve(filePath));\n\n            if(typeof fileRequire == \"function\")\n                fileRequire();\n            else if(typeof fileRequire.default == \"function\")\n                fileRequire.default();\n        });\n\n        return true;\n    });\n}\n"]}