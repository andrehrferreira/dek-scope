{"version":3,"sources":["../src/index.js"],"names":["Scope","debug","get","name","hasOwnProperty","e","console","log","message","set","value","restrictedNames","indexOf","exports","join","use","obj","status","keys","Object","key","toString","wait","timeout","_this","waitTime","pInterval","pWaitTimeout","Promise","resolve","reject","setTimeout","clearInterval","unloadDependencies","filter","setInterval","every","clearTimeout","$","plugins","pluginsPath","pluginsPathResolve","path","process","cwd","then","paths","forEach","pluginPath","env","DEBUG","pluginRequest","require","controllers","controllersPath","controllersPathResolve","controllerPath","controllerRequest","routes","routesPath","routesPathResolve","router","express","Router","routePath","routeRequest","map","mapPath","mapPathResolve","filePath","fileRequire"],"mappings":"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","sourcesContent":["//Global scope driver\n\nimport path from \"path\";\nimport globby from \"globby\";\nimport express from \"express\";\n\nvar Scope = { debug: false };\n\nScope.get = function(name) {\n    try{\n        if(this.hasOwnProperty(name))\n            return this[name];\n        else\n            throw `${name} does not exist in scope`;\n    }\n    catch(e){\n        if(this.debug)\n            console.log(e.message);\n\n        return false;\n    }\n};\n\nScope.set = function(name, value) {\n    let restrictedNames = [\"get\", \"set\", \"use\", \"wait\", \"map\", \"plugins\", \"controllers\", \"routes\"]; \n\n    if(restrictedNames.indexOf(name) === -1 && !restrictedNames.hasOwnProperty(name)){\n        try{\n            if(this.hasOwnProperty(name))\n                if(this.debug)\n                    console.log(`'${name}' was replaced by the value '${value}'`);\n        } catch(e) { \n            if(this.debug)\n                console.log(e.message);\n        }\n\n        this[name] = value;\n        exports[name] = value;\n        return true;\n    }\n    else{\n        if(this.debug)\n            console.log(`Do not use the names: ${restrictedNames.join(\", \")}`);\n\n        return false;\n    }\n};\n\nScope.use = function(obj) {\n    if(typeof obj == \"object\"){\n        let status = true;\n        const keys = Object.keys(obj);\n\n        for(let key in keys){\n            if(!this.set([keys[key]].toString(), obj[keys[key]]))\n                status = false;\n        }\n\n        return status;\n    }\n    else{\n        return false;\n    }\n};\n\nScope.wait = function(obj, timeout) {\n    let _this = this;\n    let waitTime = timeout || 3000;\n    let pInterval = null, pWaitTimeout = null;\n\n    return new Promise(async (resolve, reject) => {\n        try{\n            pWaitTimeout = setTimeout(() => {\n                if(pInterval)\n                    clearInterval(pInterval);\n\n                if(typeof obj == \"object\"){\n                    let unloadDependencies = obj.filter((key) => (!_this.hasOwnProperty(key)));\n                    reject(`The wait timeout was reached without loading the dependencies: ${unloadDependencies.join(\", \")}`);\n                }\n                else if(typeof obj == \"string\"){\n                    reject(`The wait timeout was reached without loading the dependencies: ${obj}`);\n                }                \n            }, waitTime);\n\n            if(typeof obj == \"object\"){\n                pInterval = setInterval(() => {\n                    if(obj.every((key) => { return _this.hasOwnProperty(key); })){\n                        if(pInterval) clearInterval(pInterval);\n                        if(pWaitTimeout)  clearTimeout(pWaitTimeout);\n\n                        resolve();\n                    }\n                }, 100);\n            }\n            else if(typeof obj == \"string\"){\n                pInterval = setInterval(() => {\n                    if(_this.hasOwnProperty(obj)){\n                        if(pInterval) clearInterval(pInterval);\n                        if(pWaitTimeout) clearTimeout(pWaitTimeout);\n\n                        resolve();\n                    }\n                }, 100);\n            }\n            else{\n                reject(\"Dependencies must be 'object' or 'string'.\");\n            }\n        } \n        catch(e){\n            reject(e);\n        }\n    });\n};\n\nexport let $ = Scope;\nexport default Scope;\n\n//Plugins\nexport let plugins = async (pluginsPath) => {\n    try{\n        const pluginsPathResolve = path.join(process.cwd(), pluginsPath);\n\n        await globby([`${pluginsPathResolve}/index.js`, `${pluginsPathResolve}/build/index.js`, `${pluginsPathResolve}/*/build/index.js`]).then(async (paths) => {\n            await paths.forEach(async (pluginPath) => {\n                if(process.env.DEBUG == \"true\")\n                    console.log(`[ Plugins ] - Load ${pluginPath}`);\n\n                var pluginRequest = require(path.resolve(pluginPath));\n\n                if(typeof pluginRequest == \"function\")\n                    await pluginRequest();\n                else if(typeof pluginRequest.default == \"function\")\n                    await pluginRequest.default();\n            });\n        });\n    } catch(e){\n        console.log(`[ Plugins ] - ${e.message}`);\n    }\n};\n\n//Controllers\nexport let controllers = async (controllersPath) => {\n    try{\n        const controllersPathResolve = path.join(process.cwd(), controllersPath);\n\n        await globby([`${controllersPathResolve}/*.js`, `${controllersPathResolve}/**/*.js`]).then(async (paths) => {\n            paths.forEach(async (controllerPath) => {\n                if(process.env.DEBUG == \"true\")\n                    console.log(`[ Controllers ] - Load ${controllerPath}`);\n\n                var controllerRequest = require(path.resolve(controllerPath));\n\n                if(typeof controllerRequest == \"function\")\n                    await controllerRequest();\n                else if(typeof controllerRequest.default == \"function\")\n                    await controllerRequest.default();\n            });\n        });\n    }\n    catch(e){\n        console.log(`[ Controllers ] - ${e.message}`);\n    }\n};\n\n//Routes\nexport let routes = async (routesPath) => {\n    const routesPathResolve = path.join(process.cwd(), routesPath);\n    const router = express.Router();\n\n    await globby([`${routesPathResolve}/*.js`, `${routesPathResolve}/**/*.js`]).then((paths) => {\n        paths.forEach((routePath) => {\n            var routeRequest = require(path.resolve(routePath));\n\n            if(typeof routeRequest == \"function\")\n                routeRequest(router);\n            else if(typeof routeRequest.default == \"function\")\n                routeRequest.default(router);\n        });\n\n        return true;\n    });\n\n    return router;\n};\n\n//Maps\nexport let map = async (mapPath) => {\n    const mapPathResolve = path.join(process.cwd(), mapPath);\n\n    await globby([`${mapPathResolve}/*.js`, `${mapPathResolve}/**/*.js`]).then((paths) => {\n        paths.forEach((filePath) => {\n            let fileRequire = require(path.resolve(filePath));\n\n            if(typeof fileRequire == \"function\")\n                fileRequire();\n            else if(typeof fileRequire.default == \"function\")\n                fileRequire.default();\n        });\n\n        return true;\n    });\n};\n"],"file":"index.js"}